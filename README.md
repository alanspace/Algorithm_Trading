# Algorithmic Trading Analysis Toolkit

This repository contains a collection of Python scripts for performing quantitative analysis, sentiment analysis, and algorithmic trading strategies on stock market data. It features various tools for data fetching, technical analysis, portfolio optimization, and machine learning-based predictions.

## ‚ú® Key Features

- **Technical Analysis:** Calculates and visualizes common indicators like Moving Averages (SMA/EMA), Relative Strength Index (RSI), and MACD.
- **Sentiment Analysis:** 
    - Fetches news headlines from Finnhub and analyzes sentiment using pre-trained NLP models (`nltk`, `transformers`).
    - Analyzes sentiment of hardcoded financial news articles.
- **Portfolio Optimization:**
    - Maximizes the Sharpe Ratio for a given portfolio of stocks.
    - Dynamically adjusts portfolio weights based on LSTM-predicted returns and a volatility cap.
- **Machine Learning Predictions:**
    - Uses LSTM neural networks to predict future price trends for individual stocks and portfolios.
    - Employs Linear Regression for baseline price forecasting.
- **Risk Analysis:** Performs Principal Component Analysis (PCA) to identify the main risk factors within a stock portfolio.
- **Strategy Backtesting:** Includes a grid search script to find the optimal parameters for a Moving Average Crossover strategy.

## üõ†Ô∏è Tech Stack

- **Core Libraries:** Python 3.11, Pandas, NumPy
- **Data & APIs:** yfinance, Alpha Vantage, Finnhub
- **Machine Learning:** TensorFlow (Keras), PyTorch, Scikit-learn
- **NLP:** NLTK, Hugging Face Transformers
- **Plotting:** Matplotlib, Seaborn

## üèÜ Results Showcase

Here are some concrete results from the analysis scripts:

### 1. Sharpe Ratio Optimization

The `sharpe_ratio.py` script optimizes a portfolio to maximize its risk-adjusted return. For a portfolio of `['AAPL', 'TSLA', 'AMZN', 'GOOG', 'META']`, the script was able to improve the Sharpe Ratio from **0.67** to **0.73**.

**Initial Portfolio (Equal Weights):**
```
Expected Annual Return: 23.21%
Annual Volatility: 31.58%
Sharpe Ratio: 0.67
```

**Optimized Portfolio (Max Sharpe Ratio):**
```
Optimal weight for AAPL: 56.92%
Optimal weight for TSLA: 0.00%
Optimal weight for AMZN: 26.40%
Optimal weight for GOOG: 0.00%
Optimal weight for META: 16.67%

Expected Annual Return: 24.34%
Annual Volatility: 30.43%
Sharpe Ratio: 0.73
```

### 2. Moving Average Crossover Backtest

The `algorithmtrading_gridsearch.py` script performs a grid search to find the most profitable parameters for a moving average crossover strategy on AAPL stock data. The backtest yielded the following results:

```
- The best short window is: 10
- The best long window is: 110
- The best profit is: $102,528.70
```

## üìÇ Project Structure

The repository is organized to separate source code from generated results, making it clean and easy to navigate.

```
/Algorithm_Trading/
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ ... (all python scripts)
‚îî‚îÄ‚îÄ results/
    ‚îú‚îÄ‚îÄ ... (all generated charts)
```

## üöÄ Getting Started

### 1. Clone the Repository
```bash
git clone <repository-url>
cd Algorithm_Trading
```

### 2. Set Up the Conda Environment
It is highly recommended to use Conda to manage the complex dependencies of this project.

```bash
# Create a new conda environment named 'trade' with Python 3.11
conda create -n trade python=3.11 -y

# Activate the environment
conda activate trade

# Install all required packages from requirements.txt
pip install -r requirements.txt
```
*Note: The environment setup has been tested on an Apple Silicon (M2) Mac. Some dependencies, especially for deep learning, might require different installation steps on other architectures.*

### 3. Configure API Keys
This project uses API keys from Finnhub and Alpha Vantage.

1.  Create a file named `.env` in the root directory of the project.
2.  Add your API keys to the file in the following format:

    ```
    FINNHUB_API_KEY="YOUR_FINNHUB_KEY_HERE"
    ALPHAVANTAGE_API_KEY="YOUR_ALPHAVANTAGE_KEY_HERE"
    ```

## üìà Usage Examples

All scripts should be run from the root directory of the project.

### Example 1: Run the Full Sentiment and Price Analysis
This script fetches live data, performs sentiment analysis, and generates comprehensive plots.

```bash
python src/sentimental_analysis/sentient_analysis_api.py
```

### Example 2: Run the Investment Analyzer
This script fetches data for a portfolio, predicts trends with an LSTM model, performs PCA risk analysis, and generates recommendations.

```bash
python src/investment_analyzer.py
```

## üìä Sample Output

Here are some examples of the charts generated by the analysis scripts.

**Sentiment vs. Price Analysis:**
![Sentiment Analysis Chart](results/sentimental_analysis/Disruptive_Tech__EV.png)

**LSTM Price Prediction:**
![LSTM Prediction Chart](results/hk_stock/lstm_prediction_1398.HK.png)


## Disclaimer

This project is for educational and demonstration purposes only. The analyses and predictions generated are not financial advice. Trading stocks involves substantial risk.
